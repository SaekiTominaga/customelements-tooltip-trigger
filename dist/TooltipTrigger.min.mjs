var t,e,i,s,n,o,a,r,l,h,d,u=this&&this.__classPrivateFieldSet||function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},c=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};import p from"/customelements-tooltip-trigger/node_modules/@saekitominaga/document-generate-id/dist/DocumentId.mjs";import m from"/customelements-tooltip-trigger/node_modules/@saekitominaga/document-maximum-zindex/dist/DocumentZindex.mjs";export default class v extends HTMLAnchorElement{constructor(){super(),t.set(this,2147483647),e.set(this,void 0),i.set(this,null),s.set(this,null),n.set(this,"x-tooltip"),o.set(this,"tooltip-"),a.set(this,250),r.set(this,null),l.set(this,null),h.set(this,void 0),d.set(this,void 0),u(this,e,void 0!==this.attributeStyleMap),this.setAttribute("role","button"),this.setAttribute("aria-expanded","false")}connectedCallback(){const t=new URL(this.href),e=t.hash;if(t.origin!==location.origin||t.pathname!==location.pathname||""===e)throw new Error("Attribute: `href` is not set or the value is invalid.");const s=document.getElementById(e.substring(1));if(null===s)throw new Error(`Element: ${e} can not found.`);u(this,i,s);const o=this.dataset.tooltipElement;if(void 0!==o){if(!o.includes("-"))throw new Error("Attribute: `data-tooltip-element` value must contain a hyphen.");u(this,n,o)}const a=this.dataset.tooltipCloseText;if(""===a)throw new Error("Attribute: `data-tooltip-close-text` value cannot be empty.");u(this,h,a);const r=this.dataset.tooltipCloseSrc;if(""===r)throw new Error("Attribute: `data-tooltip-close-src` value cannot be empty.");u(this,d,r),this.addEventListener("mouseenter",this._mouseEnterEvent,{passive:!0}),this.addEventListener("mouseleave",this._mouseLeaveEvent,{passive:!0}),this.addEventListener("click",this._clickEvent)}disconnectedCallback(){c(this,s)?.remove(),this.removeEventListener("mouseenter",this._mouseEnterEvent),this.removeEventListener("mouseleave",this._mouseLeaveEvent),this.removeEventListener("click",this._clickEvent)}_mouseEnterEvent(){this._show()}_mouseLeaveEvent(){u(this,r,setTimeout((()=>{this._hide()}),c(this,a)))}_clickEvent(t){this._show(),c(this,l)?.focus(),t.preventDefault()}_create(){const t=document.createElement(c(this,n));t.id=new p(10,{alphalower:!0,alphaupper:!0,number:!0,symbol:""},c(this,o)).generate(),void 0!==c(this,d)&&t.setAttribute("close-src",c(this,d)),void 0!==c(this,h)&&t.setAttribute("close-text",c(this,h)),document.body.appendChild(t),u(this,s,t);const a=document.createElement("div");a.tabIndex=-1,a.slot="tooltip",a.insertAdjacentHTML("afterbegin",c(this,i).innerHTML),c(this,e)?a.attributeStyleMap.set("outline","none"):a.style.outline="none",t.appendChild(a),u(this,l,a),t.addEventListener("mouseenter",(()=>{this._show()}),{passive:!0}),t.addEventListener("mouseleave",(()=>{this._hide()}),{passive:!0})}_show(){null===c(this,s)&&this._create(),null!==c(this,r)&&clearTimeout(c(this,r));const i=c(this,s);this.setAttribute("aria-expanded","true"),this.setAttribute("aria-describedby",i.id),i.setAttribute("open","");const n=this.getBoundingClientRect();let o=(new m).getMaximum()+1;o>c(this,t)&&(o=c(this,t)),c(this,e)?(i.attributeStyleMap.set("left","auto"),i.attributeStyleMap.set("right","auto"),i.attributeStyleMap.set("top",CSS.px(Math.round(n.bottom)).add(CSS.px(window.pageYOffset))),document.documentElement.scrollWidth-n.left<i.offsetWidth?i.attributeStyleMap.set("right","0"):i.attributeStyleMap.set("left",CSS.px(Math.round(n.left))),i.attributeStyleMap.set("z-index",o)):(i.style.left="auto",i.style.right="auto",i.style.top=`${String(Math.round(n.bottom)+window.pageYOffset)}px`,document.documentElement.scrollWidth-n.left<i.offsetWidth?i.style.right="0":i.style.left=`${String(Math.round(n.left))}px`,i.style.zIndex=String(o))}_hide(){const t=c(this,s);this.setAttribute("aria-expanded","false"),this.removeAttribute("aria-describedby"),t.removeAttribute("open")}}t=new WeakMap,e=new WeakMap,i=new WeakMap,s=new WeakMap,n=new WeakMap,o=new WeakMap,a=new WeakMap,r=new WeakMap,l=new WeakMap,h=new WeakMap,d=new WeakMap;