{"version":3,"sources":["Tooltip.mjs"],"names":["_tooltipElement","_closeButtonElement","_closeButtonImageElement","_firstFocusableElement","_lastFocusableElement","_triggerElement","_closeButtonClickEventListener","_firstFocusableFocusEventListener","_lastFocusableFocusEventListener","__classPrivateFieldSet","this","receiver","privateMap","value","has","TypeError","set","__classPrivateFieldGet","get","Tooltip","HTMLElement","[object Object]","super","cssString","shadow","attachShadow","mode","innerHTML","undefined","adoptedStyleSheets","cssStyleSheet","CSSStyleSheet","replaceSync","shadowRoot","getElementById","_closeButtonClickEvent","bind","_firstFocusableFocusEvent","_lastFocusableFocusEvent","observedAttributes","addEventListener","passive","removeEventListener","name","_oldValue","newValue","open","document","activeElement","focus","setAttribute","String","alt","src","getAttribute","Error","removeAttribute","closeText","closeSrc","WeakMap"],"mappings":"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","file":"Tooltip.min.mjs","sourcesContent":["var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\n    if (!privateMap.has(receiver)) {\n        throw new TypeError(\"attempted to set private field on non-instance\");\n    }\n    privateMap.set(receiver, value);\n    return value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\n    if (!privateMap.has(receiver)) {\n        throw new TypeError(\"attempted to get private field on non-instance\");\n    }\n    return privateMap.get(receiver);\n};\nvar _tooltipElement, _closeButtonElement, _closeButtonImageElement, _firstFocusableElement, _lastFocusableElement, _triggerElement, _closeButtonClickEventListener, _firstFocusableFocusEventListener, _lastFocusableFocusEventListener;\n/**\n * Tooltip\n *\n * @example\n * <x-tooltip\n *   open=\"[Optional・boolean] Whether the tooltip are visible.\"\n *   close-text=\"[Optional] The text of the close button in the tooltip (Image alternative text). The default value is `Close`.\"\n *   close-src=\"[Optional] The address of the image resource for the close button in the tooltip. The default is a gray x button (SVG format).\"\n * >\n * </x-tooltip>\n *\n * @version 1.0.0\n */\nexport default class Tooltip extends HTMLElement {\n    constructor() {\n        super();\n        _tooltipElement.set(this, void 0);\n        _closeButtonElement.set(this, void 0);\n        _closeButtonImageElement.set(this, void 0);\n        _firstFocusableElement.set(this, void 0); // ツールチップ内の最初にあるフォーカス可能な要素\n        _lastFocusableElement.set(this, void 0); // ツールチップ内の最後にあるフォーカス可能な要素\n        _triggerElement.set(this, null); // ツールチップの表示を呼び出した要素\n        _closeButtonClickEventListener.set(this, void 0);\n        _firstFocusableFocusEventListener.set(this, void 0);\n        _lastFocusableFocusEventListener.set(this, void 0);\n        const cssString = `\n\t\t\t:host {\n\t\t\t\t--tooltip-margin: 5px;\n\t\t\t\t--tooltip-padding: 15px;\n\t\t\t\t--tooltip-border-width: 1px;\n\t\t\t\t--tooltip-border-color: #ccc;\n\t\t\t\t--tooltip-border-radius: .25em;\n\t\t\t\t--tooltip-box-shadow: 0 0 .5em #666;\n\t\t\t\t--tooltip-max-width: 30em;\n\t\t\t\t--tooltip-color: #000;\n\t\t\t\t--tooltip-background: #fff;\n\t\t\t\t--tooltip-font-size: .9rem;\n\t\t\t\t--tooltip-line-height: 1.5;\n\t\t\t\t--tooltip-outline-color: #4d90fe;\n\n\t\t\t\t--tooltiip-close-shift: 1px; /* 右上からの距離 */\n\t\t\t\t--tooltiip-close-padding: 6px;\n\t\t\t\t--tooltiip-close-border-width: 1px;\n\t\t\t\t--tooltiip-close-border-color: transparent;\n\t\t\t\t--tooltiip-close-border-radius: 5px;\n\t\t\t\t--tooltiip-close-width: 36px;\n\t\t\t\t--tooltiip-close-height: 36px;\n\t\t\t\t--tooltiip-close-color: inherit;\n\t\t\t\t--tooltiip-close-background: transparent;\n\t\t\t\t--tooltiip-close-border-color--hover: #eee;\n\t\t\t\t--tooltiip-close-color--hover: inherit;\n\t\t\t\t--tooltiip-close-background--hover: #f8f8f8;\n\n\t\t\t\tmargin: var(--tooltip-margin);\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: inline-block;\n\t\t\t}\n\n\t\t\t:host(:not([open])) {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n\t\t\t/* 実際に表示される部分 */\n\t\t\t.tooltip {\n\t\t\t\tpadding: var(--tooltip-padding);\n\t\t\t\tborder-width: var(--tooltip-border-width);\n\t\t\t\tborder-style: solid;\n\t\t\t\tborder-color: var(--tooltip-border-color);\n\t\t\t\tborder-radius: var(--tooltip-border-radius);\n\t\t\t\tbox-shadow: var(--tooltip-box-shadow);\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tposition: relative;\n\t\t\t\tmax-width: var(--tooltip-max-width);\n\t\t\t\tcolor: var(--tooltip-color);\n\t\t\t\tbackground: var(--tooltip-background);\n\t\t\t\tfont-size: var(--tooltip-font-size);\n\t\t\t\tline-height: var(--tooltip-line-height);\n\t\t\t\toutline: none;\n\t\t\t}\n\n\t\t\t.tooltip:focus {\n\t\t\t\t--tooltip-border-color: var(--tooltip-outline-color);\n\t\t\t}\n\n\t\t\t/* 閉じるボタン用の空間を確保 */\n\t\t\t.tooltip::before {\n\t\t\t\tfloat: right;\n\t\t\t\tdisplay: block;\n\t\t\t\twidth: calc(var(--tooltiip-close-width) + var(--tooltiip-close-shift) - var(--tooltip-padding));\n\t\t\t\theight: calc(var(--tooltiip-close-height) + var(--tooltiip-close-shift) - var(--tooltip-padding));\n\t\t\t\tcontent: \"\";\n\t\t\t}\n\n\t\t\t/* 閉じるボタン */\n\t\t\t.close {\n\t\t\t\tpadding: var(--tooltiip-close-padding);\n\t\t\t\tborder-width: var(--tooltiip-close-border-width);\n\t\t\t\tborder-style: solid;\n\t\t\t\tborder-color: var(--tooltiip-close-border-color);\n\t\t\t\tborder-radius: var(--tooltiip-close-border-radius);\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: var(--tooltiip-close-shift);\n\t\t\t\tright: var(--tooltiip-close-shift);\n\t\t\t\twidth: var(--tooltiip-close-width);\n\t\t\t\theight: var(--tooltiip-close-height);\n\t\t\t\tcolor: var(--tooltiip-close-color);\n\t\t\t\tbackground: var(--tooltiip-close-background);\n\t\t\t\tfont: inherit;\n\t\t\t\tline-height: 1;\n\t\t\t\toutline: none;\n\t\t\t}\n\n\t\t\t.close:hover,\n\t\t\t.close:focus {\n\t\t\t\t--tooltiip-close-border-color: var(--tooltiip-close-border-color--hover);\n\t\t\t\t--tooltiip-close-color: var(--tooltiip-close-color--hover);\n\t\t\t\t--tooltiip-close-background: var(--tooltiip-close-background--hover);\n\t\t\t}\n\n\t\t\t.close:focus {\n\t\t\t\t--tooltiip-close-border-color: var(--tooltip-outline-color);\n\t\t\t}\n\n\t\t\t.close img {\n\t\t\t\tdisplay: block;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t}\n\t\t`;\n        const shadow = this.attachShadow({ mode: 'open' });\n        shadow.innerHTML = `\n\t\t\t<span tabindex=\"0\" id=\"focusable-first\"></span>\n\t\t\t<div id=\"tooltip\" class=\"tooltip\" role=\"tooltip\" tabindex=\"0\">\n\t\t\t\t<slot name=\"tooltip\"></slot>\n\t\t\t\t<button type=\"button\" id=\"close\" class=\"close\">\n\t\t\t\t\t<img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNiIgaGVpZ2h0PSIzNiIgdmlld0JveD0iMCAwIDM2IDM2Ij48c3R5bGU+cGF0aHtzdHJva2U6Izc2NzY3NjtzdHJva2Utd2lkdGg6NnB4O3N0cm9rZS1saW5lY2FwOnJvdW5kfTwvc3R5bGU+PHBhdGggZD0iTTMgM2wzMCAzME0zIDMzTDMzIDMiLz48L3N2Zz4=\" alt=\"Close\" id=\"close-image\"/>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<span tabindex=\"0\" id=\"focusable-last\"></span>\n\t\t`;\n        if (shadow.adoptedStyleSheets !== undefined) {\n            const cssStyleSheet = new CSSStyleSheet();\n            cssStyleSheet.replaceSync(cssString);\n            shadow.adoptedStyleSheets = [cssStyleSheet];\n        }\n        else {\n            /* adoptedStyleSheets 未対応環境 */\n            shadow.innerHTML += `<style>${cssString}</style>`;\n        }\n        const shadowRoot = this.shadowRoot;\n        __classPrivateFieldSet(this, _tooltipElement, shadowRoot.getElementById('tooltip'));\n        __classPrivateFieldSet(this, _closeButtonElement, shadowRoot.getElementById('close'));\n        __classPrivateFieldSet(this, _closeButtonImageElement, shadowRoot.getElementById('close-image'));\n        __classPrivateFieldSet(this, _firstFocusableElement, shadowRoot.getElementById('focusable-first'));\n        __classPrivateFieldSet(this, _lastFocusableElement, shadowRoot.getElementById('focusable-last'));\n        __classPrivateFieldSet(this, _closeButtonClickEventListener, this._closeButtonClickEvent.bind(this));\n        __classPrivateFieldSet(this, _firstFocusableFocusEventListener, this._firstFocusableFocusEvent.bind(this));\n        __classPrivateFieldSet(this, _lastFocusableFocusEventListener, this._lastFocusableFocusEvent.bind(this));\n    }\n    static get observedAttributes() {\n        return ['open', 'close-text', 'close-src'];\n    }\n    connectedCallback() {\n        __classPrivateFieldGet(this, _closeButtonElement).addEventListener('click', __classPrivateFieldGet(this, _closeButtonClickEventListener), { passive: true });\n        /* 循環フォーカス */\n        __classPrivateFieldGet(this, _firstFocusableElement).addEventListener('focus', __classPrivateFieldGet(this, _firstFocusableFocusEventListener), { passive: true });\n        __classPrivateFieldGet(this, _lastFocusableElement).addEventListener('focus', __classPrivateFieldGet(this, _lastFocusableFocusEventListener), { passive: true });\n    }\n    disconnectedCallback() {\n        __classPrivateFieldGet(this, _closeButtonElement).removeEventListener('click', __classPrivateFieldGet(this, _closeButtonClickEventListener));\n        /* 循環フォーカス */\n        __classPrivateFieldGet(this, _firstFocusableElement).removeEventListener('focus', __classPrivateFieldGet(this, _firstFocusableFocusEventListener));\n        __classPrivateFieldGet(this, _lastFocusableElement).removeEventListener('focus', __classPrivateFieldGet(this, _lastFocusableFocusEventListener));\n    }\n    attributeChangedCallback(name, _oldValue, newValue) {\n        switch (name) {\n            case 'open': {\n                const open = newValue !== null;\n                if (open) {\n                    __classPrivateFieldSet(this, _triggerElement, document.activeElement);\n                }\n                else {\n                    if (__classPrivateFieldGet(this, _triggerElement) !== null) {\n                        __classPrivateFieldGet(this, _triggerElement).focus();\n                    }\n                }\n                this.setAttribute('aria-hidden', String(!open));\n                break;\n            }\n            case 'close-text': {\n                if (newValue !== null && newValue !== '') {\n                    __classPrivateFieldGet(this, _closeButtonImageElement).alt = newValue;\n                }\n                break;\n            }\n            case 'close-src': {\n                if (newValue !== null && newValue !== '') {\n                    __classPrivateFieldGet(this, _closeButtonImageElement).src = newValue;\n                }\n                break;\n            }\n        }\n    }\n    get open() {\n        return this.getAttribute('open') !== null;\n    }\n    set open(value) {\n        if (typeof value !== 'boolean') {\n            throw new Error('Only a boolean value can be specified for the `open` attribute of the <x-tooltip> element.');\n        }\n        if (value) {\n            this.setAttribute('open', '');\n        }\n        else {\n            this.removeAttribute('open');\n        }\n    }\n    get closeText() {\n        return this.getAttribute('close-text');\n    }\n    set closeText(value) {\n        if (value !== null) {\n            this.setAttribute('close-text', value);\n        }\n    }\n    get closeSrc() {\n        return this.getAttribute('close-src');\n    }\n    set closeSrc(value) {\n        if (value !== null) {\n            this.setAttribute('close-src', value);\n        }\n    }\n    /**\n     * 閉じるボタンをクリックしたときの処理\n     */\n    _closeButtonClickEvent() {\n        this.open = false;\n    }\n    /**\n     * ツールチップ内の最初にあるフォーカス可能な要素にフォーカスが移ったときの処理\n     */\n    _firstFocusableFocusEvent() {\n        __classPrivateFieldGet(this, _closeButtonElement).focus();\n    }\n    /**\n     * ツールチップ内の最後にあるフォーカス可能な要素にフォーカスが移ったときの処理\n     */\n    _lastFocusableFocusEvent() {\n        __classPrivateFieldGet(this, _tooltipElement).focus();\n    }\n}\n_tooltipElement = new WeakMap(), _closeButtonElement = new WeakMap(), _closeButtonImageElement = new WeakMap(), _firstFocusableElement = new WeakMap(), _lastFocusableElement = new WeakMap(), _triggerElement = new WeakMap(), _closeButtonClickEventListener = new WeakMap(), _firstFocusableFocusEventListener = new WeakMap(), _lastFocusableFocusEventListener = new WeakMap();\n"]}